/*! Packages 27-01-2015 */

!function(){"use strict";var a=angular.module("BlogApp",["ngRoute","angular-toArrayFilter"]);a.config(["$routeProvider",function(a){a.when("/",{redirectTo:"/posts"}).when("/posts/:param?",{templateUrl:"posts.html",controller:"PostsCtrl"}).when("/post/:param?",{templateUrl:"post.html",controller:"PostCtrl"}).when("/admin/:param?",{templateUrl:"admin.html",controller:"AdminCtrl"})}]),a.controller("NavCtrl",["$scope","navService","activeService",function(a,b,c){var d=b.navElms;d.then(function(b){a.data=b.data}),a.activate=function(a){return a===c.data?"active":""}}]),a.controller("PostsCtrl",["$scope","$route","$routeParams","postsService","activeService","sanitizeService",function(a,b,c,d,e,f){var g=d.getPosts;a.pages=[],g.then(function(b){a.data=b.data;var d=a.data.posts.length;if(3>d&&console.log("do nothing"),d>3)for(var e=d%3+1,f=1;e+1>f;f++){a.pages[f]=[];for(var g=3*f-3;3*f>g;g++)a.pages[f].push(a.data.posts[g])}a.currentPage=c.param?Number(c.param):1,a.pages[a.currentPage+1]||(console.log("Hide next button"),$(".next").css("display","none")),a.pages[a.currentPage-1]||(console.log("Hide previous button"),$(".previous").css("display","none")),console.log(a.currentPage),console.log(a.pages[a.currentPage])}),a.sanitize=f.getUrl,e.data=0,a.$on("$destroy",function(){e.data=null})}]),a.controller("PostCtrl",["$scope","$routeParams","postsService","sanitizeService",function(a,b,c,d){var e=c.getPosts;a.url=b.param,a.sanitize=d.getUrl,e.then(function(b){a.data=b.data;for(var c=0;c<a.data.posts.length;c++)a.url===a.sanitize(a.data.posts[c].titles)&&(a.single=a.data.posts[c])})}]),a.controller("AdminCtrl",["$scope","activeService",function(a,b){b.data=1,a.$on("$destroy",function(){b.data=null})}]),a.factory("postsService",["$http",function(a){var b=a.get("data/posts.json");return{getPosts:b}}]),a.factory("navService",["$http",function(a){var b=a.get("data/nav.json");return{navElms:b}}]),a.factory("activeService",function(){return{data:null}}),a.factory("sanitizeService",function(){var a=function(a){for(var b=0;b<a.length;b++)(" "===a[b]||"_"===a[b])&&(a=a.substr(0,b)+a.substr(b+1,a.length));return a};return{getUrl:a}}),a.controller("FiltersCtrl",["$scope","$filter","$route","postsService","sanitizeService",function(a,b,c,d,e){var f=d.getPosts;f.then(function(d){a.data=d.data,a.categories={},a.authors={},a.years={},a.numPosts=a.data.posts.length,a.keyUp=function(a){return Object.keys(a)},a.sanitize=e.getUrl,a.addFilter=function(a){return"?filter="+a};var f=c.current.params.param,g=c.current.$$route.controller;a.param=f&&"PostsCtrl"===g?"/"+f:"";for(var h=0;h<a.data.posts.length;h++){for(var i=a.data.posts[h],j=i.author,k=i.date,l=b("date")(k,"yyyy"),m=b("date")(k,"MMMM"),n=0;n<i.tags.length;n++){var o=i.tags[n];a.categories[o]=a.categories[o]?a.categories[o]+1:1}a.authors[j]=a.authors[j]?a.authors[j]+1:1,a.years[l]?a.years[l][m]=a.years[l][m]?a.years[l][m]+1:1:(a.years[l]={},a.years[l][m]=1)}})}])}();
//# sourceMappingURL=main.min.js.map